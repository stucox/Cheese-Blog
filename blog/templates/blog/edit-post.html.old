{% extends "page.html" %}
{% load filetransfers %}
{% block stylesheets %}
<link rel="stylesheet" href="{{ STATIC_URL }}blog/styles.css" />
{% endblock stylesheets %}
{% block scripts %}
{% endblock scripts %}
{% block contentclass %}blog edit{% endblock contentclass %}
{% block content %}
<p class="back"><a href="{% url blog:ctrl-panel %}">Back to Control Panel</a></p>
<form action="{{ upload_url }}" method="post" enctype="multipart/form-data">
{% csrf_token %}
{% render_upload_data upload_data %}
<label for="title">Title:</label><input type="text" value="{{ post.title }}" name="title" />
<label for="slug">Permalink:</label><p class="permalink">{% if post.slug %}http://{{ request.META.HTTP_HOST }}{{ post.get_absolute_url }}{% else %}
    <span class="hint">A permalink will be generated when you submit the post</span>{% endif %}</p>
<label for="image">Image:</label>{% if post.image %}{% url post-image pk=post.image.file.pk as fallback_url %}
    <img src="{% firstof post.image.file|public_download_url fallback_url %}" />{% endif %}<input type="file" name="image" />
<label for="summary">Summary:</label><input type="text" value="{{ post.summary }}" name="summary" />
<label for="pubDate">Date published:</label><input type="text" disabled="disabled" value="{{ post.pubDate|default_if_none:"Not yet published" }}" name="pubDate" />
<label for="lastMod">Last modified:</label><input type="text" disabled="disabled" value="{{ post.lastMod|default_if_none:"Not yet published" }}" name="lastMod" />
<label for="content">Content:</label><textarea name="content">{{ post.content }}</textarea>
<input type="submit" value="Submit" />
</form>
{% endblock content %}
